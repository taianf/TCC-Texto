\documentclass{beamer}
%\documentclass[handout]{beamer}

\usepackage{masterSlides}
\usepackage{multirow}
\usepackage{rotating}
\usepackage{color}

\mode<presentation>
{
  \setbeamertemplate{background canvas}[vertical shading][bottom=white!10,top=structure.fg!10]

%  \usetheme{WarsawMaster}
  \usetheme{Belem}
  \usefonttheme[onlylarge]{structuresmallcapsserif}
  \usefonttheme[onlysmall]{structurebold}
}

\setbeamercolor{normal text}{fg=black,bg=white}

\setbeamerfont{lines of code}{size=\footnotesize,shape=\scshape,
                              series=\bfseries,family=\sffamily}

\setbeamerfont{title}{size=\large}
%\setbeamercolor{title}{fg=blue!10!black, bg=blue!40!white}
%\setbeamercolor{block title}{fg=blue!10!black, bg=blue!40!white}

\title[Tempo Real em plataformas Linux]{Avaliação do determinismo temporal\\
  no tratamento de interrupções\\ em plataformas de tempo real Linux}

\author[Paul Regnier]{Paul Regnier, George Lima, Luciano Barreto}

\institute[UFBA] {
  Laboratório de Sistemas Distribuídos (LaSiD)\\
  Mestrado em Mecatrônica\\
  Departamento de Ciência da Computação - UFBA\\
  \vspace{0.14cm}
  Apoio FAPESB - TIC 2630-2006}

\date[WSO 2008]{Workshop de Sistemas Operacionais 2008}

\pgfdeclareimage[height=0.5cm]{logoUFBA}{fig/logoUfbaPB}
\logo{\pgfuseimage{logoUFBA}}

% Delete this, if you do not want the table of contents to pop up at
% the beginning of each subsection:
% \AtBeginSubsection[]
% {
%   \begin{frame}<beamer>
%     \frametitle{Roteiro}
%     \tableofcontents[currentsection, currentsubsection]
%   \end{frame}
% }

% If you wish to uncover everything in a step-wise fashion, uncomment
% the following command: 

%\beamerdefaultoverlayspecification{<+->}

\newcommand{\spctabde}{\rule{0cm}{0.6cm}}

\begin{document}

%\includecomment{iscomm}
\excludecomment{iscomm}


\begin{frame}
  \titlepage
\end{frame}

% \begin{frame}
%   \frametitle{Roteiro}
%   \tableofcontents%[pausesections]
% \end{frame}


% \section{Introdução}

% \subsection{O problema}

\section{Introdução}


\begin{frame}
  \frametitle{Contexto \\
    \small Mestrado em Mecatrônica}

  \begin{block}<1->{Desenvolvimento de \emph{DoRiS} \\
\ing{an Ethernet Double Ring Service for RTS}}
    \begin{itemize}
    \item Protocolo de comunicação em tempo real baseado em Ethernet
    \item Especificação e verificação formal em TLA+
    \item Realização de um protótipo num SO de Tempo Real
    \end{itemize}
  \end{block}

  \begin{alertblock}<2->{{\Large{\ding{229}}} Objetivo: \textnormal{achar uma
        plataforma operacional com garantias temporais satisfatória em situação de
        carga variável}} Sistema Operacional de Tempo Real (SOTR) com ambiente misto
    de programação (controle e supervisão em tempo real e aplicações de melhor
    esforço)
  \end{alertblock}

\end{frame}


\begin{frame}
  \frametitle{A escolha de Linux}
  \begin{block}<1->{Vantagens}
    \begin{itemize}
    \item SO de código livre e aberto
    \item Boa aceitação nos ambientes de pesquisa acadêmica
    \item Grande variedade de aplicações (multimídia, banco de dados, sistemas embarcadas...) 
    \end{itemize}
  \end{block}

\vspace{0.2cm}

  \begin{block}<2->{Porém, Linux não fornece garantias temporais suficientes}
    \begin{itemize}
    \item Resolução temporal
    \item Escalonamento (resolução do \emph{tick})
    \item Tratamento das interrupções
    \end{itemize}
  \end{block}
\end{frame}

\section{Linux Tempo Real}

\begin{frame}
  \frametitle{Abordagens de tempo real para Linux}

  \begin{block}<1->{Linux$^{\mathbf{Prt}}$}
    \begin{itemize}
    \item Temporizadores de alta resolução ($\mu s$)
    \item Kernel totalmente \alert{preemptível}
    \item Compartilhamento de recursos $\Rightarrow$ \alert{herança de prioridade}
    \item 1 \ing{IRQ-line} $\Rightarrow$ 1 \alert{\ing{thread} de interrupção}
    \item Opção \cod{IRQF\_NODELAY} 
    \end{itemize}
  \end{block}

  \begin{block}<2->{Linux$^{\mathbf{Xen}}$}
    \begin{itemize}
    \item \alert{Domínio}: ambiente isolados de execução
    \item \alert{I-Pipe}: canal hierárquico de interrupções 
    \item Técnica de \alert{indireção das interrupções} - Adeos (\nanokernel)
    \item Pilha de rede determinista RTnet
    \item API de tempo real (RTDM) - modo kernel e/ou usuário
    \end{itemize}
  \end{block}

\end{frame}


\begin{frame}
  \frametitle{Gerenciamento das interrupções no Xenomai}
  \only<1>{
    \begin{figure}[hbt]
      \centering {\scalebox{0.47}{\input{fig/xeno.pdf_t}}}
    \end{figure}
  }
\end{frame}


\section{Experimento I}


\subsection{Métricas}

\begin{frame}
  \frametitle{Métricas: $Lat_{irq}$ e $Lat_{ativ}$}
  \begin{block}{Latência de interrupção: $Lat_{irq}$}
      O intervalo de tempo entre o instante no qual uma interrupção é requisitada
      por um dispositivo de hardware e o instante no qual o respectivo tratador
      começa a executar
  \end{block}

  \vspace{0.1cm}

  \begin{block}{Latência de ativação: $Lat_{ativ}$}
      O intervalo de tempo entre o instante no qual uma tarefa é acordada
      e o instante no qual esta tarefa começa a executar
  \end{block}

  \vspace{0.1cm}

  \begin{exampleblock}{Time Stamp Counter (TSC)}
    Medidas de tempo realizadas pela leitura dos 64 bits do TSC com precisão
    de $30 ns$
  \end{exampleblock}
\end{frame}

\subsection{Dispositivo experimental}

\begin{frame}
  \frametitle{Dispositivo experimental}
    \begin{figure}[t]
      \centering {\scalebox{0.8}{\input{fig/config1-0.pdf_t}}}
    \end{figure}

  \begin{block}{Medidas na estação $E_M$}
     Realizadas no contexto da recepção, em $eth_0$, de quadros
      Ethernet enviados por $E_T$ com uma freqüência de 20 Hz
  \end{block}

\end{frame}


\begin{frame}
  \frametitle{Metodologia experimental}

  \only<1>{
    \begin{figure}[hbt]
      \centering {\scalebox{0.8}{\input{fig/dispExp-0.pdf_t}}}
    \end{figure}
  }
  \only<2>{
    \begin{figure}[hbt]
      \centering {\scalebox{0.8}{\input{fig/dispExp-1.pdf_t}}}
    \end{figure}
  }
  \only<3>{
    \begin{figure}[hbt]
      \centering {\scalebox{0.8}{\input{fig/dispExp.pdf_t}}}
    \end{figure}
  }
  
  \begin{center}
    \begin{minipage}{0.9\linewidth}

      \begin{tabular}{ r l }
        \onslide<1-3>{
          \col{$t_1$ em $E_M$} & 
          \begin{tabular}{l }
            1. Pacote enviado por $E_D$ chegue em $E_M$\\
            2. Requisição de uma interrupção na PP\\
          \end{tabular}
        }\\
        \onslide<2-3>{
          \col{$t_2$ em $E_M$} &
          \begin{tabular}{l }
            1. Execução do tratador de interrupção da PP \spctabde \\
            2. Sinal de despertar da tarefa $\tau$\\
          \end{tabular}
        }\\
        \onslide<3>{
          \col{$t_3$ em $E_M$} \spctabde &
          \begin{tabular}{l }
            1. A tarefa $\tau$ acorda\\
          \end{tabular}
        }
      \end{tabular}

    \end{minipage}
  \end{center}
  
\end{frame}


\subsection{Carga}

\begin{frame}
  \frametitle{Carga de interrupções, de processamento e E/S}
  
  \begin{block}<1->{Carga de interrupções}
       Fluxo de pacotes de 64 \ing{bytes} na freqüência de $200
        kHz$ entre $E_M$ (servidor) e $E_L$ (\ing{load}) (100.000 interrupções por
        segundos)
  \end{block}

  \begin{figure}[htb]
    \centering {\scalebox{0.6}{\input{fig/config2.pdf_t}}}
  \end{figure}

  \begin{block}<1->{Carga de processamento e E/S (Shell-script)}
    \begin{center}
      \begin{minipage}{0.90\linewidth}
        \vspace{ 4pt } \footnotesize{%
          \textbf{\texttt{while "true"; do\\
            \rule{0.5cm}{0pt} dd if=/dev/hda2 of=/dev/null bs=1M count=1000\\
            \rule{0.5cm}{0pt} find / -name ''*.c'' | xargs egrep include\\
            \rule{0.5cm}{0pt} tar -cjf /tmp/root.tbz2 /usr/src/linux-xenomai\\
            \rule{0.5cm}{0pt}  cd /usr/src/linux-preempt; make clean; make\\
            done \vspace{ 4pt }
          }}}
      \end{minipage}
    \end{center}
  \end{block}

\end{frame}

\section{Resultados}

\begin{frame}
  \frametitle{As plataformas avaliadas}
  
  \begin{tabular}{ l p{9cm} }
    \col{\textbf{Linux}$^{\mathbf{Std}}$} & Linux padrão - kernel 2.6.23.9
    (opção \ing{low-latency})\\
    \col{\textbf{Linux}$^{\mathbf{Prt}}$} &Linux, \ing{patch}
    Preempt-RT rt12, kernel 2.6.23.9 \spctabde \\
    \col{\textbf{Linux}$^{\mathbf{PrtND}}$} \spctabde &Linux$^{\mathbf{Prt}}$, 
    opção \cod{IRQF\_NODELAY} para a linha PP-IRQ \\
    \col{\textbf{Linux}$^{\mathbf{Xen}}$} & Linux, \ing{patch} Xenomai 
    2.4-rc5, kernel 2.6.19.7 \spctabde \\
  \end{tabular}
  
  \vspace{0.5cm}
  \begin{block}{Experimentos}
    \begin{itemize}
    \item Duração dos experimentos de 600 s (12.000 medidas)
    \item As figuras correspondem a amostras de 60 s (1.200 medidas)
    \item Estatísticas correspondem a duração total de 600 s
    \end{itemize}
  \end{block}
  
\end{frame}

\setbeamerfont{caption}{size=\scriptsize}
\newcommand{\capt}[1]{\raisebox{-1ex}{{\scalebox{1.2}{#1}}}}

\begin{frame}
  \frametitle{Linux$^{\mathbf{Std}}$ - $\mathbf{Lat_{irq}}$ \textbf{com carga}}
  \usebeamerfont{caption}

  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig/ker23Tot}}}
    \capt{M:    10.4, SD:     1.9,  Mn:     8.8, Mx:    67.7}
  \end{figure}

\end{frame}

\begin{frame}
  \frametitle{Linux$^{\mathbf{Std}}$ - $\mathbf{Lat_{ativ}}$ \textbf{com carga}}
  \usebeamerfont{caption}

  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig/ker23TotSched}}}
    \capt{M:    37.3, SD:    48.2,  Mn:     4.6, Mx:   617.5}
  \end{figure}

\end{frame}

\begin{frame}
  \frametitle{Linux$^{\mathbf{Prt}}$ - $\mathbf{Lat_{irq}}$ \textbf{com carga}}
  \usebeamerfont{caption}
  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig/preTot}}}
    \capt{M: 58.5, SD: 26.4, Mn: 17.2, Mx: 245.9}
  \end{figure}
\end{frame}


\begin{iscomm}
\begin{frame}
  \frametitle{Linux$^{\mathbf{Prt}}$ - $\mathbf{Lat_{ativ}}$ \textbf{com carga}}
  \usebeamerfont{caption}
  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig/preTotSched}}}
    \capt{M: 3.8, SD: 2.8, Mn: 1.1, Mx: 27.4}
  \end{figure}
\end{frame}
\end{iscomm}

\begin{frame}
  \frametitle{Linux$^{\mathbf{PrtND}}$ - $\mathbf{Lat_{irq}}$ \textbf{com carga}}
  \usebeamerfont{caption}
  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig/preTotND}}}
    \capt{M: 10.6, SD: 1.6, Mn: 8.9, Mx: 35.8}
  \end{figure}
\end{frame}


\begin{frame}
  \frametitle{Linux$^{\mathbf{PrtND}}$ - $\mathbf{Lat_{ativ}}$ \textbf{com carga}}
  \usebeamerfont{caption}
  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig/preTotSchedND}}}
    \capt{M:     8.0, SD:     2.0,  Mn:     5.2, Mx:    31.0}
  \end{figure}
\end{frame}

\begin{frame}
  \frametitle{Linux$^{\mathbf{Xen}}$ - $\mathbf{Lat_{irq}}$ \textbf{com carga}}
  \usebeamerfont{caption}
  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig/xenTot}}}
    \capt{M: 10.2, SD: 0.1, Mn: 8.8, Mx: 20.8}
  \end{figure}
\end{frame}


\begin{frame}
  \frametitle{Linux$^{\mathbf{Xen}}$ - $\mathbf{Lat_{ativ}}$ \textbf{com carga}}
  \usebeamerfont{caption}
  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig/xenTotSched}}}
    \capt{M: 8.7, SD: 0.3, Mn: 1.8, Mx: 18.7}
  \end{figure}
\end{frame}



\begin{frame}
  \frametitle{Dispositivo Experimental 2 (DE2)}
    \begin{figure}[t]
      \centering {\scalebox{0.8}{\input{fig/config2-0.pdf_t}}}
    \end{figure}

    \vspace{0.1cm}
    \begin{block}{Medidas na estação $E_T$}
      \begin{itemize}
      \item 
        $E_T$ utiliza Linux$^{\mathbf{Xen}}$, em modo \ing{single}
        \alert{$\Rightarrow Lat_{irq} \approx \delta$}       
      \item 
        $E_T$ requisita interrupções na PP de $E_M$, com
        freqüência de 20 Hz
      \item Medidas realizadas em $E_T$ no tratamento das interrupções requisitadas
        por $E_M$
      \end{itemize}
    \end{block}

\end{frame}


\begin{frame}
  \frametitle{Metodologia Experimental - DE2}

  \only<1>{
    \begin{figure}[hbt]
      \centering {\scalebox{0.74}{\input{fig/dispExp2-0.pdf_t}}}
    \end{figure}
  }
  \only<2>{
    \begin{figure}[hbt]
      \centering {\scalebox{0.74}{\input{fig/dispExp2-1.pdf_t}}}
    \end{figure}
  }
  \only<3>{
    \begin{figure}[hbt]
      \centering {\scalebox{0.74}{\input{fig/dispExp2.pdf_t}}}
    \end{figure}
  }

\small
  \begin{center}
    \begin{minipage}{0.7\linewidth}

      \begin{tabular}{r l }
        \onslide<1-3>{
          \col{$t_1$ em $E_T$} &  IRQ na PP de $E_M$ e gravação de $t_1$\\
        }
        \onslide<2-3>{
          \col{$t_2 - \delta$ em $E_M$} &
          IRQ na PP de $E_T$ e sinal de despertar de $\tau$ \spctabde\\
          \col{$t_2$ em $E_T$} &  Gravação de $t_2$ \\
        }
        \onslide<3>{
          \col{$t_3 - \delta$ em $E_M$} & A tarefa $\tau$ acorda e IRQ na PP de $E_T$ \spctabde\\
          \col{$t_3$ em $E_T$} &  Gravação de $t_3$ \\
        }
      \end{tabular}

    \end{minipage}
  \end{center}

\end{frame}

\begin{frame}
  \frametitle{Linux$^{\mathbf{Xen}}$ - $\mathbf{Lat_{irq}}$ \textbf{com carga} -DE2}
  \usebeamerfont{caption}
  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig2/xenTot}}}
    \capt{M:    11.3, SD:     1.2,  Mn:    9.0, Mx:    19.7}
  \end{figure}
\end{frame}


\begin{frame}
  \frametitle{Linux$^{\mathbf{Xen}}$ - $\mathbf{Lat_{ativ}}$ \textbf{com carga} - DE2}
  \usebeamerfont{caption}
  \begin{figure}%
    \centering
    {\scalebox{0.74}{\input{fig2/xenTotSched}}}
    \capt{M:     9.8, SD:     2.0,  Mn:     2.7, Mx:    20.8 }
  \end{figure}
\end{frame}

\begin{iscomm}
\begin{frame}
  \frametitle{Linux$^{\mathbf{Xen}}$ - DE2}
  \usebeamerfont{caption}
  \vspace{-0.8cm}

  \begin{columns}[t]
   \begin{column}{6cm}
      \begin{figure}%
        \centering
        \usebeamerfont{caption}
        {\scalebox{0.4}{\input{fig2/xenSem}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{sem carga}:
            M:    9.1, SD:     0.3,  Mn:    9.8, Mx:    13.4}
        {\scalebox{0.4}{\input{fig2/xenSemSched}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{sem carga}:
            M:     4.0, SD:     0.3,  Mn:     0.3, Mx:     9.6}
      \end{figure}
     \end{column}

    \begin{column}{6cm}
      \begin{figure}%
        \centering
        {\scalebox{0.4}{\input{fig2/xenTot}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{com carga}:
          M:    11.3, SD:     1.2,  Mn:    9.0, Mx:    19.7 }
        {\scalebox{0.4}{\input{fig2/xenTotSched}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{com carga}:
        M:     9.8, SD:     2.0,  Mn:     2.7, Mx:    20.8 }
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}
\end{iscomm}

\begin{frame}
\frametitle{Resultados em $\mu s$ para as 4 plataformas}

\newcommand{\spcrule}{0.6cm}

\begin{table}[t!]
\centering
{\scalebox{0.6}{
\begin{tabular}{p{0.6cm} @{} p{1.2cm}
|r @{\hspace{0.23cm}} r | r @{\hspace{0.23cm}} r | r @{\hspace{0.23cm}} r
|r @{\hspace{0.23cm}} r | r @{\hspace{0.23cm}} r | r @{\hspace{0.23cm}} r
|r @{\hspace{0.23cm}} r | r @{\hspace{0.23cm}} r |}
\cline{3-18}

&&
\multicolumn{4}{|c|}{\rule{0cm}{0.6cm}\textbf{Linux}$^{\mathbf{Std}}$}&
\multicolumn{4}{|c|}{\textbf{Linux}$^{\mathbf{Prt}}$}&
\multicolumn{4}{|c|}{\textbf{Linux}$^{\mathbf{PrtND}}$}&
\multicolumn{4}{|c|}{\textbf{Linux}$^{\mathbf{Xen}}$}\\

\cline{2-18}
&
\vline \rule{0cm}{0.4cm} \textbf{Load} &
\multicolumn{2}{|c|}{\textbf{no}}&
\multicolumn{2}{|c|}{\textbf{yes}}&
\multicolumn{2}{|c|}{\textbf{no}}&
\multicolumn{2}{|c|}{\textbf{yes}}&
\multicolumn{2}{|c|}{\textbf{no}}&
\multicolumn{2}{|c|}{\textbf{yes}}&
\multicolumn{2}{|c|}{\textbf{no}}&
\multicolumn{2}{|c|}{\textbf{yes}}\\
\cline{2-18}

&&
\rule{0cm}{\spcrule}$\mathbf{L_{irq}}$ & $\mathbf{L_{act}}$ & 
$\mathbf{L_{irq}}$ & $\mathbf{L_{act}}$ & $\mathbf{L_{irq}}$ & $\mathbf{L_{act}}$ &
$\mathbf{L_{irq}}$ & $\mathbf{L_{act}}$ & $\mathbf{L_{irq}}$ & $\mathbf{L_{act}}$ &
$\mathbf{L_{irq}}$ & $\mathbf{L_{act}}$ & $\mathbf{L_{irq}}$ & $\mathbf{L_{act}}$ &
$\mathbf{L_{irq}}$ & $\mathbf{L_{act}}$\\
\cline{2-18}

\multirow{4}{*}{\begin{sideways}\textbf{Exp. 1}\rule{0.4cm}{0.cm}\end{sideways}}
&
\vline\rule{0cm}{\spcrule} \textbf{Mean} &
\textbf{8.9}   &  \textbf{4.6} & \textbf{10.4} & \textbf{37.3} &
\textbf{21.5} &  \textbf{2.1} & \textbf{58.5} & \textbf{3.8}  &
\textbf{8.9}   &  \textbf{5.3}  & \textbf{10.6} &   \textbf{8.0} &
\textbf{9.0}   &  \textbf{2.1} & \col{\textbf{10.2}}   &  \col{\textbf{8.7}} \\ 
\cline{2-18}

&
\vline \rule{0cm}{\spcrule} \textbf{SD} &
\textbf{0.3} &  \textbf{0.4} &  \textbf{1.9} & \textbf{48.2} &
  \textbf{1.7} &  \textbf{0.2} & \textbf{26.4} & \textbf{2.8} &
\textbf{0.2} &  \textbf{0.3} &  \textbf{1.6} & \textbf{2.0}   &
\textbf{0.1} &   \textbf{0.5} &   \textbf{0.1} & \textbf{0.3 } \\
\cline{2-18}

&
\vline \rule{0cm}{\spcrule} \textbf{Min} &
  \textbf{8.7} &  \textbf{4.4} &  \textbf{8.8} &  \textbf{4.6} &
\textbf{20.3} &  \textbf{1.2} & \textbf{17.2} & \textbf{1.1} &
  \textbf{8.8} &  \textbf{5.0} &  \textbf{8.9} &  \textbf{5.2} & 
 \textbf{8.8} &  \textbf{1.8} &   \textbf{8.8} & \textbf{1.8} \\
\cline{2-18}

&
\vline \rule{0cm}{\spcrule} \textbf{Max} &
\textbf{18.4} & \textbf{16.2} & \textbf{67.7} & \col{\textbf{617.5}} &
\textbf{45.1} & \textbf{9.4} & \col{\textbf{245.9}} & \textbf{27.4} &
\textbf{16.7} & \textbf{13.1} & \col{\textbf{35.8}} & \textbf{31.0} &
\textbf{11.1} & \textbf{8.4} & \col{\textbf{20.8}}   &  \col{\textbf{18.7}} \\
%\cline{2-18}
\hline\hline\hline\hline
%\cline{2-18}
\multirow{4}{*}{\begin{sideways}\textbf{Exp. 2}\rule{0.4cm}{0.cm}\end{sideways}}
&
\vline \rule{0cm}{\spcrule} \textbf{Mean} &
   \textbf{9.0} &  \textbf{3.6}  & \textbf{12.5}   & \textbf{19.9} &
 \textbf{10.2} &  \textbf{3.7}  & \textbf{31.2}   &  \textbf{7.2}  &
   \textbf{9.2} &  \textbf{4.6}  & \textbf{11.8}   & \textbf{14.9} &
   \textbf{9.1} &  \textbf{4.0}  & \col{\textbf{11.3}}   &  \col{\textbf{9.8}}  \\
\cline{2-18}

&
\vline \rule{0cm}{\spcrule} \textbf{SD} &
  \textbf{0.4} &  \textbf{0.6} &  \textbf{3.2} & \textbf{17.4} &
  \textbf{0.5} &  \textbf{0.4} & \textbf{19.0} &  \textbf{3.1} &
  \textbf{0.4} &  \textbf{0.5} &  \textbf{2.3} &  \textbf{5.6}  & 
  \textbf{0.3} &  \textbf{0.3} &  \textbf{1.2} &  \textbf{2.0}  \\
\cline{2-18}

&
\vline \rule{0cm}{\spcrule} \textbf{Min} &
    \textbf{8.8} & \textbf{-1.3} &    \textbf{9.0} &  \textbf{2.3} &
  \textbf{10.0} &  \textbf{0.8} &  \textbf{10.4} &  \textbf{2.2} &
    \textbf{8.9} &  \textbf{-0.3} &    \textbf{9.1} &  \textbf{4.5} & 
    \textbf{8.8} &  \textbf{0.3} &    \textbf{9.0} &  \textbf{2.7} \\
\cline{2-18}

&
\vline \rule{0cm}{\spcrule} \textbf{Max} &
  \textbf{18.4} & \textbf{19.0} &   \textbf{75.0} &  \col{\textbf{428.4}}  & 
  \textbf{30.8} & \textbf{12.7} & \col{\textbf{203.9}} &   \textbf{21.2}  &
  \textbf{14.9} & \textbf{14.2} &   \textbf{49.2} &   \col{\textbf{85.0}}  &
  \textbf{13.4} &  \textbf{9.6}  &   \col{\textbf{19.7}}  &  \col{\textbf{11.8}}  \\
\cline{2-18}
\cline{2-18}

\end{tabular}
}} % End scalebox
\end{table}

\end{frame}

\begin{frame}
  \frametitle{\textbf{Linux}$^\mathbf{Xen}$ - 20 horas - DE2\\
    \small Histograma com 1.000.000 eventos (escala logarítmica)}
  \begin{figure}[h!tb]%
    \centering
    {\scalebox{0.76}{\input{fig/histo}}}% \hspace{10pt}%
  \end{figure}
  
\end{frame}

\subsection{Trabalhos relacionados}

\begin{frame}
  \frametitle{Trabalhos relacionados}

  \begin{block}{\textsc{Rostedt} and \textsc{Hart} \cite{Rostedt07} -
      Linux$^\mathbf{Prt}$}
    \begin{itemize}
    \item Latência de interrupção e escalonamento (tarefa periódica)
    \item Sem carga do processador
    \end{itemize}
  \end{block}

  \vspace{0.1cm}
  \begin{block}{\textsc{Siro} and al. \cite{Siro07} - Linux$^\mathbf{Prt}$,
      RT-Linux, RTAI }
    \begin{itemize}
    \item  Desvios de uma tarefa periódica
    \item \emph{lmbench}, sem carga de interrupção
    \end{itemize}
  \end{block}

  \vspace{0.1cm}
  \begin{block}{\textsc{Benoit} and \textsc{Yaghmour} \cite{Benoit05} -
      Linux$^\mathbf{Prt}$, Linux$^\mathbf{Xen}$}
    \begin{itemize}
    \item  Latência de interrupção (metodologia 2)
    \item \emph{lmbench}, com carga de interrupção
    \item Não publicado, sem latência de ativação
    \end{itemize}
  \end{block}

\end{frame}


\begin{frame}
  \frametitle{Conclusão}
  
  As duas metodologias experimentais forneceram resultados similares.
  
  \begin{block}{\textbf{Linux}$^\mathbf{Std}$}
    \begin{itemize}
    \item Não provê garantias temporais
    \item Piores casos acima de $100 \mu s$ e desvios padrões altos
    \end{itemize}
  \end{block}
  
  \begin{block}{\textbf{Linux}$^\mathbf{Prt}$}
    \begin{itemize}
    \item Piores casos abaixo de 50 $\mu s$ sem \ing{thread} de
      interrupção
    \item Degradação sensível de $Lat_{irq}$ com \ing{thread} de interrupção
    \end{itemize}
  \end{block}
  
  \begin{block}{\textbf{Linux}$^\mathbf{Xen}$}
    \begin{itemize}
    \item \alert{Plataforma a mais determinística}
    \item Piores casos observados de  $20 \mu s$, desvios  
      padrões de $3 \mu s$
    \end{itemize}
  \end{block}

\end{frame}



\appendix
\section{\appendixname}

\subsection{Elementos de bibliografia}

\begin{frame}[allowframebreaks]
  \frametitle<presentation>{Elementos de bibliografia}
    
  \begin{thebibliography}{10}
    
  \beamertemplatebookbibitems

  \bibitem{Bovet05} D. P. Bovet, M. Cesati
    \newblock Understanding the Linux Kernel
    \newblock {\em O'Reilly (3rd)}, 2005

  \bibitem{Corbet05} J. Corbet, A. Rubini and G. Kroah-Hartman
    \newblock Linux Device Drivers
    \newblock {\em O'Reilly (3rd)}, 2005

  \beamertemplatearticlebibitems

  \bibitem{Rostedt07}
    S. Rostedt and D. V. Hart
    \newblock Internals of the RT Patch
    \newblock {Proceedings of the Linux Symposium}, 2007

  \bibitem{Siro07}
    A. Siro, C. Emde and N. McGuire
    \newblock Assessment of the Realtime Preemption Patches (RT-Preempt) and
                  their impact on the general purpose performance of the system
    \newblock {Proceedings of the 9th Real-Time Linux Workshop}, 2007

  \beamertemplatearrowbibitems
  \bibitem{Xenomai}
    P. Gerum, K. Yaghmour et al.
    \newblock Xenomai
    \newblock {\em http://www.xenomai.org}, acessado em julho 08

  \bibitem{Preempt-RT}
    I. MOLNAR et al.
    \newblock Preempt-RT
    \newblock {\em http://rt.wiki.kernel.org} - acessado em julho 08

  \bibitem{Benoit05}
    K. Benoit and K. Yaghmour
    \newblock Preempt-RT and I-pipe: the numbers
    \newblock {http://marc.info/?l=linux-kernel\&m=112086443319815\&w=2}, 
    acessado em julho 2008
  \end{thebibliography}
\end{frame}

\end{document}



\begin{frame}
  \frametitle{Linux$^{\mathbf{Std}}$}
  \usebeamerfont{caption}
  \vspace{-0.8cm}

  \begin{columns}[t]
   \begin{column}{6cm}
      \begin{figure}%
        \centering
        \usebeamerfont{caption}
        {\scalebox{0.4}{\input{fig/ker23Sem}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{sem carga}:
            M:     8.9, SD:     0.3,  Mn:     8.7, Mx:    18.4}
        {\scalebox{0.4}{\input{fig/ker23SemSched}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{Sem carga}:
            M:     4.6, SD:     0.4,  Mn:     4.4, Mx:    16.2}
      \end{figure}
     \end{column}

    \begin{column}{6cm}
      \begin{figure}%
        \centering
        {\scalebox{0.4}{\input{fig/ker23Tot}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{com carga}:
          M:    10.4, SD:     1.9,  Mn:     8.8, Mx:    67.7}
        {\scalebox{0.4}{\input{fig/ker23TotSched}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{com carga}:
        M:    37.3, SD:    48.2,  Mn:     4.6, Mx:   617.5}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}



\begin{frame}
  \frametitle{Linux$^{\mathbf{Prt}}$}
  \usebeamerfont{caption}
  \vspace{-0.8cm}

  \begin{columns}[t]
   \begin{column}{6cm}
      \begin{figure}%
        \centering
        \usebeamerfont{caption}
        {\scalebox{0.4}{\input{fig/preSem}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{sem carga}:
            M: 21.5, SD: 1.7, Mn: 20.3, Mx: 45.1}
        {\scalebox{0.4}{\input{fig/preSemSched}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{sem carga}:
            M: 2.1, SD: 0.2, Mn: 1.2, Mx: 9.4}
      \end{figure}
     \end{column}

    \begin{column}{6cm}
      \begin{figure}%
        \centering
        {\scalebox{0.4}{\input{fig/preTot}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{com carga}:
          M:    10.4, SD:     1.9,  Mn:     8.8, Mx:    67.7}
        {\scalebox{0.4}{\input{fig/preTotSched}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{com carga}:
        M: 3.8, SD: 2.8, Mn: 1.1, Mx: 27.4}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}


\begin{frame}
  \frametitle{Linux$^{\mathbf{PrtND}}$ (opção \cod{IRQF\_NODELAY})}
  \usebeamerfont{caption}
  \vspace{-0.8cm}

  \begin{columns}[t]
   \begin{column}{6cm}
      \begin{figure}%
        \centering
        \usebeamerfont{caption}
        {\scalebox{0.4}{\input{fig/preSemND}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{sem carga}:
            M: 8.9, SD: 0.2, Mn: 8.8, Mx: 16.7}
        {\scalebox{0.4}{\input{fig/preSemSchedND}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{sem carga}:
            M:     5.3, SD:     0.3,  Mn:     5.0, Mx:    13.1}
      \end{figure}
     \end{column}

    \begin{column}{6cm}
      \begin{figure}%
        \centering
        {\scalebox{0.4}{\input{fig/preTotND}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{com carga}:
          M: 10.6, SD: 1.6, Mn: 8.9, Mx: 35.8}
        {\scalebox{0.4}{\input{fig/preTotSchedND}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{com carga}:
        M:     8.0, SD:     2.0,  Mn:     5.2, Mx:    31.0}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}


\begin{frame}
  \frametitle{Linux$^{\mathbf{Xen}}$}
  \usebeamerfont{caption}
  \vspace{-0.8cm}

  \begin{columns}[t]
   \begin{column}{6cm}
      \begin{figure}%
        \centering
        \usebeamerfont{caption}
        {\scalebox{0.4}{\input{fig/xenSem}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{sem carga}:
            M: 9.0, SD: 0.1, Mn: 8.8, Mx: 11.1}
        {\scalebox{0.4}{\input{fig/xenSemSched}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{sem carga}:
            M: 2.1, SD: 0.5, Mn: 1.8, Mx: 8.4}
      \end{figure}
     \end{column}

    \begin{column}{6cm}
      \begin{figure}%
        \centering
        {\scalebox{0.4}{\input{fig/xenTot}}}
        \capt{$\mathbf{Lat_{irq}}$ \textbf{com carga}:
          M: 10.2, SD: 0.1, Mn: 8.8, Mx: 20.8}
        {\scalebox{0.4}{\input{fig/xenTotSched}}}
        \capt{$\mathbf{Lat_{ativ}}$ \textbf{com carga}:
        M: 8.7, SD: 0.3, Mn: 1.8, Mx: 18.7}
      \end{figure}
    \end{column}
  \end{columns}
\end{frame}
