\chapter{Conclusão}
\label{sec:conclusao}

Nesta dissertação, foi descrito um novo protocolo baseado em dois anéis lógicos que
organiza a coexistência de comunicações com requisitos temporais críticos e
não-críticos, num mesmo barramento Ethernet.

Graças à utilização da abordagem TDMA para estruturar o anel crítico, \doris{}
garante previsibilidade para as aplicações com requisitos temporais críticos,
enquanto a utilização da abordagem com bastão circulante implícito serviu para
controlar eficientemente o acesso ao meio referente ao anel não-crítico.  Esta
combinação permitiu garantir, por um lado, a confiabilidade do protocolo pelo
isolamento temporal dos dois modos de comunicação e, por outro, otimizar o uso
da banda.

O protocolo \doris{} foi especificado formalmente em TLA+ (\ing{Temporal Logic of
  Actions}) e várias propriedades temporais do protocolo foram verificadas pelo
verificador de modelos TLC (\ing{Temporal Logic Checker}). Especificar o protocolo
em TLA+ permitiu adquirir uma compreensão precisa do sistema e das suas
funcionalidades, antes de partir para a fase de implementação. Esta fase se
beneficiou da especificação formal, que foi utilizada como base para o trabalho de
codificação. Apesar de a escolha de usar uma plataforma já existente ter
impossibilitado, em parte, um melhor aproveitamento da especificação, pois a
codificação do protocolo teve que seguir o padrão da plataforma, chegou-se à
conclusão que a fase de especificação facilitou várias decisões importantes
tomadas durante a fase de implementação do protocolo.

Para o desenvolvimento deste projeto, uma plataforma de Tempo Real baseada no
Sistema Operacional de Propósito Geral - Linux foi escolhida.  As principais
motivações para tal escolha foram a boa divulgação deste sistema de código aberto
nas comunidades de pesquisa e a existência de extensões de tempo real para
Linux. Algumas destas extensões foram apresentadas e experimentos foram realizados
para medir as latências de interrupção e ativação de tarefas de tempo real.  Os
resultados obtidos permitiram confirmar a viabilidade do uso destes ambientes
operacionais para desenvolver \doris. Em particular, as plataformas de código aberto
RTAI e Xenomai / Linux apresentaram propriedades temporais satisfatórias,
conseguindo garantir o escalonamento de tarefas de tempo real com tempos de
latências abaixo de 20 microsegundos.

A implementação de \doriss foi então realizada na plataforma Xenomai / Linux,
podendo ser facilmente transportada para a plataforma RTAI / Linux.  A pilha de rede
determinista RTnet, já desenvolvida para estas duas plataformas, foi aproveitada, e
\doriss foi inserido, sob a forma de uma nova disciplina desta pilha.  Devido à
complexidade do desenvolvimento de um protocolo de rede determinista num ambiente
operacional tal como Xenomai / Linux, a implementação foi limitada a uma versão
simplificada de \doris, sem o mecanismo de reserva. No entanto, um mecanismo 
de configuração dinâmica do anel não-crítico foi desenvolvido para diminuir a
sobrecarga gerada pela transmissão de mensagens de controle.

O protótipo de \doris, com sua estrutura operacional em dois anéis, foi utilizado
para realizar alguns experimentos que confirmaram a capacidade do protocolo \doriss
 atender requisitos de sistemas híbridos, compostos de aplicações com requisitos
temporais críticos e não-críticos. Em particular, os experimentos mostraram que
\doriss consegue garantir determinismo para as mensagens críticas e taxas de
transmissões altas para a comunicação não-crítica. Os mesmos experimentos realizados
com a pilha RTnet, sem disciplina de acesso ao meio, provocaram desvios significativos
nos tempos de recepção das mensagens críticas e perdas de mensagens não-críticas.

No decorrer deste trabalho, vários aspectos foram abordados de maneira superficial. Outros
foram deixados para trabalhos futuros dado o horizonte temporal para concluir a presente
dissertação. Trabalhos futuros poderão: 

\begin{itemize}
\item Completar o estudo experimental do comportamento de \doriss com cenários de 
  comunicação de redes industriais. Em particular, cenários de falhas deverão ser utilizados
  para testar as propriedades de confiabilidade de \doris.
\item Estudar os protocolos de gerenciamento da composição e reconfiguração dinâmica
  dos grupos, e propor soluções adequadas para aumentar a confiabilidade e a
  flexibilidade de \doris{}.
\item Acrescentar a implementação de \doriss com o mecanismo de reserva descrito na
  sua especificação.
\item Definir políticas de escalonamento das mensagens, baseadas no mecanismo de
  reserva e em possíveis extensões deste mecanismo. O aumento do número de
  \ing{slots} de reserva por \ing{chip} poderá, por exemplo, ser utilizado para
  aumentar a flexibilidade do protocolo.
\end{itemize}

Finalmente, por ser um protocolo distribuído, descentralizado e determinista,
baseado num único barramento compartilhado, com capacidades de tolerância a falhas
de omissão de mensagens e de paradas de estações, \doriss apresenta características
interessantes para ser adaptado no contexto de redes sem fios. No entanto, tal
aplicação depende da implementação de um protocolo eficiente de gerenciamento e
reconfiguração dinâmica da composição dos anéis críticos e não-críticos.

Acredita-se que este trabalho tenha trazido contribuições para o campo
de pesquisa de redes para sistemas de tempo real. Alguns conceitos aqui
apresentados, como o mecanismo de reserva e a adoção de métodos formais na fase
inicial de concepção do protocolo de comunicação, deverão certamente influenciar
trabalhos de pesquisa futuros nesta área.
