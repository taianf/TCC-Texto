\chapter{Introdução}

Os sistemas computacionais modernos devem atender a requisitos 
cada vez mais diversos e complexos, de acordo com o número crescente 
dos seus domínios de aplicação.
Dentro do conjunto dos sistemas computacionais, os sistemas
chamados de \textbf{tempo real} são aqueles sistemas especificamente
concebidos para atender ás necessidades das aplicações com requisitos
temporais. Além de garantir a correção dos resultados gerados,
um Sistema de Tempo Real (STR) deve também garantir os tempos
de execução das tarefas e os prazos de entrega dos resultados.
Portanto, num sistema de tempo real, as durações e os instantes das
ações devem ser conhecidos de tal forma que o comportamento
do sistema seja determinístico e previsível.

Exemplos de tais sistemas encontram-se nos sistemas embarcados de
carros, aeronaves, foguetes. As plantas industriais e a robótica
constituem também domínios de aplicações destes sistemas.
Distingui-se duas grandes famílias de STR de acordo com criticidade
da aplicação temporais adotado: os STR críticos e os STR não-criticos.
Pode-se entender esta classificação da seguinte maneira.
Se a perda de um prazo de entrega de um resultado pode ter
uma conseqüência catastrófica, como a perda de uma vida humana, o STR é 
considerado  \textbf{crítico}. Por exemplo, se um freio  ABS de um
carro deixar de responder no prazo previsto, a conseqüência
pode ser catastrófica.
Ao contrário, a perda de algumas partes de uma mensagem telefônica
não tem conseqüências críticas, apenas a alteração decorrente do 
sinal, o que nem sempre impede a compreensão da conversa pelos
interlocutores.
Este tipo de serviço de tempo real, tal como tele-conferências
ou aplicações multimídia são exemplos de sistemas com requisitos
temporais não-criticos. As falhas temporais do sistema degradam
a qualidade do serviço, mas não comprometem o sistema todo.

No decorrer das últimas três décadas, a pesquisa relativa a sistemas
de tempo real enfrentou vários desafios. Ainda recentemente, 
considerava-se que estes sistemas eram compostos apenas
de tarefas de tempo real críticas, simples e de duração curta,
típicas das malhas de controle. Hoje, os sistemas de tempo real 
envolvem novas aplicações ligadas às áreas de telecomunicação,
multimídia, indústria, transporte, medicina, etc.
Portanto, além das habituais tarefas periódicas críticas que
requerem previsibilidade dos tempos de respostas \cite{Liu73},
os sistemas atuais tendem a incluir tarefas não-criticas para
dar suporte a eventos esporádicos ou aperiódicos \cite{Liu00}.
Neste trabalho, chamaremos \textbf{sistemas híbridos}, os 
sistemas compostos de aplicações com requisitos temporais
variados, críticos e não-críticos.

Outra característica da evolução dos sistemas modernos
é a modificação das suas estruturas, que passaram de
arquiteturas centralizadas para arquitetura distribuídas.
Para dar suporte a tais evoluções, a rede e os protocolos
de comunicação devem ser adaptados para poder lidar
com vários padrões de comunicação e oferecer qualidade de serviço
adequada, tanto para as tarefas com requisitos temporais críticos
quanto para as tarefas não-criticas ou aperiódicas que requerem taxas de
transmissões elevadas. Em conseqüência, as redes industriais
tradicionais tal como Profibus, ControlNet
ou CAN \cite{Profibus96,ControlNet97,CAN93, Lian99}
por exemplo, conhecidas por serem \textbf{determinísticas e confiáveis},
podem não dispor de capacidade de banda suficiente para atender
estas novas exigências.

%\newpage
Uma alternativa as redes industriais tradicionais é a Ethernet, 
devido a sua alta velocidade de transmissão e a disponibilidade de COTS
(\emph{Commercial Off The Shelf}) de baixo custo.
Além de ser popular nas arquiteturas de redes a cabo,
a tecnologia Ethernet é bastante adequada para a
implementação de protocolos de comunicação um-para-muitos
(\emph{multicast}), conforme ao modelo \emph{publish-subscribe}
\cite{Dolejs04}. Isso tem motivado o uso de Ethernet em ambientes
industriais.

No entanto, o algoritmo \emph{Binary Exponential Backoff} (BEB)
utilizado pelo protocolo CSMA/CD (\emph{Carrier Sense Multiple
Access with Collision Detection}) para controlar o acesso ao meio
físico das redes Ethernet
é probabilístico~\cite{CSMA/CD01,Wang99}, impedindo o uso direto
desta tecnologia para aplicações com requisitos temporais críticos,
típicos de contextos industriais.

Durante décadas, várias abordagens foram propostas para garantir
o determinismo de acesso ao meio \cite{Decotignie05}. Algumas
envolvem a modificação do protocolo CSMA/CD no nível de hardware,
outras introduzem uma camada de software situada entre a
camada de controle do acesso ao meio e a camada de aplicação.
No capítulo \ref{cap:motivacao}, apresentaremos de forma mais detalhada
as diferentes propostas, dando um foco maior nas soluções baseadas em
software. Apesar da diversidade das abordagens contempladas, 
mostraremos que algumas propriedades específicas aos sistemas híbridos,
i.e. com requisitos ambos críticos e não-criticos, não conseguem ser
atendidas pelos protocolos existentes de maneira eficiente.

Para oferecer garantias de qualidade de serviços para estes sistemas
híbridos e preservar a modalidade de comunicação um-para-todos 
(\emph{broadcast}) oferecida pela tecnologia Ethernet, precisa-se
então de um protocolo de comunicação determinístico e confiável que
possa otimizar o compartilhamento da banda entre as tarefas críticas
e não-criticas.

No capítulo \ref{cap:doris}, apresentaremos uma proposta de protocolo
de comunicação baseado em software que atende a estes requisitos de
sistemas híbridos. Este protocolo possui importantes características
que podem ser assim resumidas:
\begin{itemize}
\item A camada de enlaces do protocolo CSMA/CD não é alterada
e pode ser desenvolvida com interfaces Ethernet comuns i.e. 
que respeitam a norma IEEE 802.3 \cite{CSMA/CD01};
\item As modalidades de comunicação um-para-todos e
um-para-muitos desejáveis para sistemas de tempo real são
contempladas sem perdas significativas de desempenho;
\item O algoritmo do protocolo é descentralizado e provê mecanismos
de tolerância a falhas de comunicação por omissão e a falhas
silenciosas de máquinas \cite{Schlichting83};
\item Os tempos de transmissão das mensagens são garantidos
para as tarefas com requisitos temporais críticos;
\item Através de um mecanismo inovador de reserva dinâmica,
o protocolo provê uma alocação adaptável da banda para a
comunicação com requisitos temporais críticos.
\item O compartilhamento da banda entre as comunicações
críticas e não-criticas é otimizado.
\end{itemize}

Para não sobrecarregar a apresentação do protocolo, 
as definições completas de todas as transições deste
protocolo encontram-se no apêndice.

Este trabalho deu origem a um artigo publicado no Workshop de Tempo
Real 2006 \cite{Regnier06} que ocorreu em Curitíba no dia 2 de junho 
2006.

